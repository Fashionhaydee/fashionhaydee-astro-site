---
// src/pages/blog.astro
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const byCategory = {};

for (const post of allPosts) {
  const cat = post.data.category ?? 'Uncategorized';
  if (!byCategory[cat]) byCategory[cat] = [];
  byCategory[cat].push(post);
}
---

<Layout title="Jewelry Blog">
  <h1>Jewelry Journal Â· Explore by Theme</h1>
  {Object.entries(byCategory).map(([category, posts]) => (
    <section>
      <h2>{category}</h2>
      <ul>
        {posts.map((post) => (
          <li>
            <a href={post.url}><strong>{post.data.title}</strong></a><br/>
            <p>{post.data.summary}</p>
          </li>
        ))}
      </ul>
    </section>
  ))}
</Layout>
